<%- include('../partials/header') %>

<div class="container"></div>
  <div class="row gx-5">

    <div class="col-md-5">
      <section id="show-page">
        <h1 id="song"><%= song.song %></h1>
        <h4 id="cat">Title: <%= song.title %></h4>
        <br>
        <form action="/songs/<%= song._id %>/?_method=DELETE" method="POST">
            <button id="delete-btn" class="btn btn-outline-danger btn-sm" type="submit">Delete</button>
        </form>
        <a id="edit-btn" class="btn btn-outline-secondary btn-sm" href="/songs/<%= song._id %>/edit">Edit</a>
      </section>
      <br><br>

      <h3>Song Rehearsal/h3>
      <form id="song-rehearsal-form" method="POST" action="/songs/<%= song._id %>/rehearsals">
          <div class="form-text">
              <textarea class="form-control" rows="3" name="note" placeholder="Rehearsal Notes"></textarea>
          </div>    
          <br>
              <button type="submit" class="btn btn-success">Submit</button>
      </form>
    </div>

    <div class="col-md-7">
      <% if (song.song-rehearsal-form.length) { %>
        <table id="show-tbl" class="table">
            <thead>
                <tr>
                    <th scope="col">Date:</th>
                    <th scope="col">Notes:</th>
                </tr>
            </thead>
            <tbody>
                <% song.songRehearsal.forEach(function(s){ %> 
                    <tr>
                        <td scope="row"><%= s.createdAt.toLocaleDateString() %> </td>
                        <td scope="row"><%= s.note %></td>
                    </tr>
                <%}); %> 
            </tbody>
        </table>
  
    <% } else { %> 
        <h5>No rehearsals yet</h5>    
    <% } %>  
    </div>
  </div>

<%- include('../partials/footer') %>